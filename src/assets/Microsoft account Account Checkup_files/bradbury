!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jQuery")):"function"==typeof define&&define.amd?define("portal-telemetry",["jQuery"],t):"object"==typeof exports?exports["portal-telemetry"]=t(require("jQuery")):e["portal-telemetry"]=t(e.jQuery)}(self,(e=>(()=>{"use strict";var t={786:t=>{t.exports=e}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{n.r(i);var e,t,r="!START",o="Ms.Webi.MeePortal.Error",a=function(){function e(t){var r=this;if(this.options=t,this.context={},this.maxResultLength=1024,this.serialize=function(){var t=Object.keys(r.context);if(!t.length)return"";for(var n=["v=1"],i=0,o=t;i<o.length;i++){var a=o[i],s=e.contextKeyMap[a]||encodeURIComponent(a),c=r.options.normalizePropertyValue&&r.options.normalizePropertyValue(a,r.context[a])||r.context[a];n.push("".concat(s,"=").concat(encodeURIComponent(c)))}var u=n.join(",");return u.length>r.maxResultLength?"":u},this.getProperty=function(e){return r.context[e]},this.setProperty=function(e,t){t&&(r.context[e]=t)},this.deleteProperty=function(e){return!!r.context[e]&&(delete r.context[e],!0)},!t)throw new Error("options must be specified.")}return e.contextKeyMap={"app-id":"ms.a.app.id","app-version":"ms.a.app.ver","device-class":"ms.a.device.deviceClass","device-id":"ms.a.device.id","partner-id":"ms.b.tel.partner","product-id":"ms.b.tel.product","scenario-id":"ms.b.tel.scenario","scenario-step":"ms.c.ust.scenarioStep","user-id":"ms.a.user.id","root-operation":"ms.b.qos.rootOperationName",market:"ms.b.tel.market"},e}(),s=n(786),c=n.n(s),u=document.referrer,p=document.cookie,d=2;function l(e){return e}function f(e){return function(e,t){var r=new RegExp("".concat(e,"=([^&]+)"),"i"),n=t.match(r);return n&&d===n.length?n[1]:""}(e,window.location.search)}function m(e){for(var t=e.toLowerCase(),r=p.split(";"),n=0;n<r.length;n++){var i=r[n].split("="),o=decodeURIComponent(i[0].trim().toLowerCase()),a=i.length>1?i[1]:"";if(o===t)return decodeURIComponent(a)}return""}function g(){return!!c()("meta[name='noAutoPageView']").length}function h(e){var t=document.createElement("a");return t.href=e,t}function v(){return window.spaPageId||((e=document.querySelector("html > head").getElementsByTagName("meta").namedItem("pageid"))?e.getAttribute("content"):null)||document.title;var e}(t=m("oref"))&&(u=t,(e=new Date).setDate(e.getDate()-1),function(e,t,r,n){void 0===n&&(n="/");var i=r;i||(i=new Date).setDate(i.getDate()+1);var o="".concat(encodeURIComponent("oref"),"=").concat(encodeURIComponent(""),";expires=").concat(i.toUTCString(),";path=").concat(n);document.cookie=o}(0,0,e)),u=function(e,t){if(e&&!/^https:\/\/login\.live[\-\.]/i.test(e)&&!/^https:\/\/login\.microsoftonline\.com/i.test(e)&&!/^https:\/\/login\.windows-ppe\.net/i.test(e)&&!/^http(s?):\/\/directvisit/i.test(e))return e;if(!t)return e;var r=t.match(/\brefd=([0-9a-z\.\-]+)\b/i);if(!r||d!==r.length)return e;var n="https://".concat(r[1].toLowerCase(),"/"),i=t.match(/\brefp=([0-9a-z\.\-]+)\b/i);return i&&d===i.length&&(n+=i[1].replace("-","/").toLowerCase()),n}(u,window.location.search);var S,y=function(){function e(t,r,n,i){var o=this;if(this.options=t,this.cvManager=r,this.ccManager=n,this.qosLogger=i,this.willChangeSupportCors=!1,this.alwaysAddCvToRequestHeader=!0,this.timers={},this.mockedAjaxOps={},this.hostIdx=2,this.portIdx=3,this.minServerErrorStatusCode=500,this.maxServerErrorStatusCode=600,this.retryTimeout=50,this.cv1Length=16,this.cv2Length=22,this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.cv1Constants={validationPattern:new RegExp("^[".concat(this.base64CharSet,"]{").concat(16..toString(),"}(.[0-9]+)+$")),maxCorrelationVectorLength:63},this.cv2Constants={validationPattern:new RegExp("^[".concat(this.base64CharSet,"]{").concat(22..toString(),"}(.[0-9]+)+$")),maxCorrelationVectorLength:127},this.ajaxGet=function(e){return o.prepareRequest(e),o.flattenDataAndAppendAntiForgeryToken(e,-1),o.sendRequest(e,o.getImpl)},this.ajaxPost=function(e){return o.prepareRequest(e),o.flattenDataAndAppendAntiForgeryToken(e,e.antiforgeryTokenBehavior),o.sendRequest(e,o.postImpl)},this.ajaxPut=function(e){return o.prepareRequest(e),o.flattenDataAndAppendAntiForgeryToken(e,e.antiforgeryTokenBehavior),o.sendRequest(e,o.putImpl)},this.ajaxDelete=function(e){return o.prepareRequest(e),o.flattenDataAndAppendAntiForgeryToken(e,e.antiforgeryTokenBehavior),o.sendRequest(e,o.delImpl)},this.getAntiForgeryToken=function(e,t){for(var r=e&&typeof e==typeof window?e:window,n=t&&"string"==typeof t?"_".concat(t.toString()):"",i="__RequestVerificationToken".concat(n),o=r.document.getElementsByTagName("input"),a=0;a<o.length;a++){var s=o[a];if("hidden"===s.type&&s.name===i)return{name:i,value:s.value}}return{}},this.mockAjaxOperationResult=function(e,t){if(!e)throw new Error("operationName must be specified.");if(!t)throw new Error("result must be specified.");o.mockedAjaxOps[e.toLowerCase()]=t},this.clearAjaxOperationMocks=function(){o.mockedAjaxOps={}},this.targetUriOverrideCallbackFunction=function(e){return e},this.getAntiForgeryTokenForRequest=function(e){return e.token?e.token:o.getAntiForgeryToken(e.tokenWindow,e.appPath)},this.prepareRequest=function(t){if(!t.serviceName)throw new Error("AjaxTelemetrySink: settings.serviceName is not set.");if(!t.operationName)throw new Error("AjaxTelemetrySink: settings.operationName is not set.");if(t.currentOperationName=t.parentOperationName||t.operationName,t.additionalHeaders=t.additionalHeaders||[],t.requestedWithHeaderBehavior&&"query"!==t.requestedWithHeaderBehavior)"header"===t.requestedWithHeaderBehavior&&(t.additionalHeaders["X-Requested-With"]="XMLHttpRequest");else if(t.url){var r=h(t.url);r.search+=(r.search?"&":"?")+"X-Requested-With=XMLHttpRequest",t.url=r.href}o.options.useJsll3xQuirks&&("auto"!==t.dataType?t.dataType=t.dataType||"json":delete t.dataType),o.cvManager.incrementCv(),t.cV=o.cvManager.getCurrentCvValue();var n=o.ccManager.serialize();n&&(void 0===t.addCvToRequestHeader||t.addCvToRequestHeader)&&(t.additionalHeaders["Correlation-Context"]=n),t.cache&&(t.noCacheBusting=!0),(o.options.overrideRequestQosData||t.overrideRequestQosData)&&(t.QosCallback=e.overrideRequestQosData.bind(o,o.options,t)),t.antiforgeryTokenBehavior||(o.isCrossDomainRequest(t)?t.antiforgeryTokenBehavior=-1:o.isJsonContentType(t)&&(t.antiforgeryTokenBehavior=2))},this.flattenDataAndAppendAntiForgeryToken=function(e,t){var r=t||1,n=e.data;switch(n&&"string"!=typeof n&&(n=c().param(n)),r){case 1:o.getTokenAndExecuteCommandIfTokenIsValid(e,(function(e){n=n?"".concat(n,"&"):"",n+="".concat(encodeURIComponent(e.name),"=").concat(encodeURIComponent(e.value))}));break;case 2:o.getTokenAndExecuteCommandIfTokenIsValid(e,(function(t){e.additionalHeaders[encodeURIComponent(t.name)]=encodeURIComponent(t.value)}));break;case-1:break;default:throw new Error("Unsupported AntiforgeryTokenBehavior: ".concat(r))}e.data=n},this.isJsonContentType=function(e){return!!e.contentType&&"string"==typeof e.contentType&&-1!==e.contentType.indexOf("json")},this.isCrossDomainRequest=function(e){var t;try{t=location.href}catch(e){var r=document.createElement("a");r.href="",t=r.href}var n=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,i=n.exec(t.toLowerCase()),a=n.exec(e.url?e.url.toLowerCase():"");return!(!(a&&a.length>3&&i&&i.length>3)||a[1]===i[1]&&a[o.hostIdx]===i[o.hostIdx]&&(a[o.portIdx]||("http:"===a[1]?"80":"443"))===(i[o.portIdx]||("http:"===i[1]?"80":"443")))},this.sendRequest=function(e,t){if(e.operationName){var r=e.operationName.toLowerCase();if(o.mockedAjaxOps[r]){var n=o.mockedAjaxOps[r],i=c().Deferred();return setTimeout((function(){n(i)})),i}}return t(e)},this.postImpl=function(e){return e.method="POST",o.makeRequest(e)},this.getImpl=function(e){return e.method="GET",o.makeRequest(e)},this.putImpl=function(e){return e.method="PUT",o.makeRequest(e)},this.delImpl=function(e){return e.method="DELETE",o.makeRequest(e)},this.makeRequest=function(e){var t=o;if("function"==typeof c()){o.willChangeSupportCors&&(c().support.cors=!0);var r,n=e.additionalHeaders||{},i=e.body,a=i?JSON.stringify(i):e.data||void 0,s=e.maxRetry||0,u=0,p=e.operationName||e.url,d=e.errorFormatter||function(e){return e},l={url:e.url,type:e.method,data:a,crossDomain:!0,headers:{},success:e.success,timeout:e.timeout,error:e.error,jsonp:e.jsonp,jsonpCallback:e.jsonpCallback,cache:e.cache,beforeSend:function(i){if(e.contractVersion&&i.setRequestHeader("MS-Contract-Version",e.contractVersion),(!0===e.addCvToRequestHeader||!1!==e.addCvToRequestHeader&&t.alwaysAddCvToRequestHeader)&&t.isValid(r)&&i.setRequestHeader("MS-CV",r),n)for(var o in n)n.hasOwnProperty(o)&&i.setRequestHeader(o,n[o])}};e.dataType&&(l.dataType=e.dataType),e.noCacheBusting||(l.cache=!1),e.contentType&&(l.contentType=e.contentType),e.accept&&(l.headers.Accept=e.accept),e.accepts&&(l.accepts=e.accepts),e.async&&(l.async=e.async),e.xhrFields&&(l.xhrFields=e.xhrFields),e.complete&&(l.complete=e.complete),e.contents&&(l.contents=e.contents),e.context&&(l.context=e.context),e.dataFilter&&(l.dataFilter=e.dataFilter),e.global&&(l.global=e.global),e.ifModified&&(l.ifModified=e.ifModified),e.isLocal&&(l.isLocal=e.isLocal),e.mimeType&&(l.mimeType=e.mimeType),e.password&&(l.password=e.password),e.processData&&(l.processData=e.processData),e.scriptCharset&&(l.scriptCharset=e.scriptCharset),e.statusCode&&(l.statusCode=e.statusCode),e.traditional&&(l.traditional=e.traditional),e.type&&(l.type=e.type),e.username&&(l.username=e.username),e.xhr&&(l.xhr=e.xhr),r=o.isValid(e.cV)?e.cV:o.increment();var f=function(n,i,o){var a=n.getResponseHeader("Content-Length"),s={name:"Ms.Webi.OutgoingRequest",data:{cV:r,baseData:{operationName:e.currentOperationName,targetUri:t.targetUriOverrideCallbackFunction?t.targetUriOverrideCallbackFunction(l.url):l.url,latencyMs:o,serviceErrorCode:!i&&n.responseJSON&&n.responseJSON.code&&!isNaN(n.responseJSON.code)?n.responseJSON.code:-1,succeeded:i,requestMethod:l.type,responseContentType:l.dataType,protocolStatusCode:n.status.toString(),dependencyOperationName:p,dependencyOperationVersion:e.version&&e.version.toString(),dependencyName:e.serviceName,dependencyType:"WebService",responseSizeBytes:a&&parseInt(a,10)},baseType:"Ms.Qos.OutgoingServiceRequest",message:i?void 0:JSON.stringify(n.errorThrown),retryCount:u,customData:e.customDataCallBack&&"function"==typeof e.customDataCallBack?JSON.stringify(e.customDataCallBack(n)):void 0}};e.QosCallback&&"function"==typeof e.QosCallback&&e.QosCallback(n,s),t.reportEvent(s.data)},m=function(){var n="".concat(p,"_Retry_").concat(u);return t.recordTimeSpan(n,!1),c().ajax(l).then((function(e,r,i){var o=t.recordTimeSpan(n,!0);return f(i,!0,o),i}),(function(i,o){var a=t.recordTimeSpan(n,!0);f(i,!1,a);var p=c().Deferred();return s>u&&(0===i.status||i.status>=t.minServerErrorStatusCode&&i.status<t.maxServerErrorStatusCode)?(u++,r=t.isValid(e.cV)?t.incrementExternal(r):t.increment(),setTimeout((function(){m().done(p.resolve).fail(p.reject)}),t.retryTimeout)):p.reject(i,o),p.promise()}))};return m().then((function(e,t,r){return r}),(function(t){return d(t,e)}))}},this.isValid=function(e){if(e){var t=e.split(".")[0];if(t){if(t.length===o.cv1Length)return o.validateWithCv1(e);if(t.length===o.cv2Length)return o.validateWithCv2(e)}}return!1},this.validateWithCv1=function(e){return!!(o.cv1Constants.validationPattern.test(e)&&e.length<=o.cv1Constants.maxCorrelationVectorLength)},this.validateWithCv2=function(e){return!!(o.cv2Constants.validationPattern.test(e)&&e.length<=o.cv2Constants.maxCorrelationVectorLength)},this.increment=function(){return o.cvManager.incrementCv(),o.cvManager.getCurrentCvValue()},this.incrementExternal=function(e){if(o.isValid(e)){var t=e.split("."),r=t.length;t[r-1]=(parseInt(t[r-1],10)+1).toString();for(var n="",i=0;i<r;i++)n+=t[i],i<r-1&&(n+=".");var a=t[0].length===o.cv2Length?o.cv2Constants.maxCorrelationVectorLength:o.cv1Constants.maxCorrelationVectorLength;if(n.length<=a)return n}return""},this.reportEvent=function(e){var t=e.baseData,r={currentOperationName:t.operationName,operationName:t.dependencyOperationName,requestUri:t.targetUri,latencyMs:t.latencyMs,serviceErrorCode:t.serviceErrorCode,isSuccess:t.succeeded,httpMethod:t.requestMethod,contentType:t.responseContentType,httpStatusCode:t.protocolStatusCode,serviceName:t.dependencyName,serviceType:t.dependencyType,operationVersion:t.dependencyOperationVersion,responseSize:t.responseSizeBytes,errorMessage:e.message,retryCount:e.retryCount,customData:e.customData,cV:e.cV};o.qosLogger.reportOutgoingApi(r)},!t)throw new Error("options must be specified.");this.willChangeSupportCors=!1}return e.prototype.getTokenAndExecuteCommandIfTokenIsValid=function(e,t){var r=this.getAntiForgeryTokenForRequest(e);r&&t(r)},e.overrideRequestQosData=function(e,t,r,n){if((n||n.data)&&(t.overrideRequestQosData||e.overrideRequestQosData)){var i=n.data.baseData,o=n.data,a={isSuccess:i&&i.succeeded,latencyMs:i&&i.latencyMs,httpStatusCode:i&&i.protocolStatusCode,serviceErrorCode:i&&i.serviceErrorCode,errorMessage:o&&o.message};a.responseStatus=r.status,a.requestTimeout=t.timeout;var s=0;t.overrideRequestQosData&&(s=t.overrideRequestQosData(t,r,a)),0===s&&e.overrideRequestQosData&&(e.overrideRequestQosData(a),s=1),1===s&&(i&&(i.succeeded=a.isSuccess,i.latencyMs=a.latencyMs,i.protocolStatusCode=a.httpStatusCode,i.serviceErrorCode=a.serviceErrorCode),o&&(o.message=a.errorMessage))}},e.prototype.recordTimeSpan=function(e,t){var r=(new Date).getTime();return t?r-this.timers[e]:void(this.timers[e]=r)},e}(),w=function(){var e=this;this.ajaxGet=function(t){return e.performAjaxRequest("GET",t)},this.ajaxPost=function(t){return e.performAjaxRequest("POST",t)},this.ajaxPut=function(t){return e.performAjaxRequest("PUT",t)},this.ajaxDelete=function(t){return e.performAjaxRequest("DELETE",t)},this.getAntiForgeryToken=function(e,t){return{name:"antiforgery",value:"token"}},this.mockAjaxOperationResult=function(e,t){},this.clearAjaxOperationMocks=function(){},this.performAjaxRequest=function(e,t){return $.ajax($.extend({},t,{method:e}))}},C=function(){this.serialize=function(){return""},this.getProperty=function(e){return""},this.setProperty=function(e,t){},this.deleteProperty=function(e){return!1}},T=function(){this.getCurrentCvValue=function(){return"cv.1"},this.getCorrelationVectorFormFieldName=function(){return"cv"},this.seedCv=function(e){},this.incrementCv=function(){}},x=function(){function e(e){var t,n,i=this;this.options=e,this.initializationAttempt=0,this.initializers=[],this.biSinks=[],this.qosSinks=[],this.perfSinks=[],this.scenariosSinks=[],this.experimentsSinks=[],this.configurationUpdateSinks=[],this.pageViewOccurred=!1,this.executeOnPageViewQueue=[],this.maxErrorStringLength=100,this.timeoutMultiplier=100,this.scenarioStartPoints={},this.useAsGlobalTelemetryProvider=function(){window.BradburyTelemetry=i.toTelemetryProvider(),i.dom.setWindowLoadHandler(i.$notifyPageLoaded)},this.toTelemetryProvider=function(){return{cv:i.cvManager,cc:i.ccManager,qos:i,perf:i,bi:i,scenarios:i,experiments:i,ajax:i.ajaxTelemetry,utilities:i.utilities,configuration:i}},this.setCorrelationVectorManager=function(e){i.cvManager=e},this.setCorrelationContextManager=function(e){i.ccManager=e},this.setUtilityFunctions=function(e){i.utilities=e},this.setAjaxTelemetrySink=function(e){i.ajaxTelemetry=e},this.registerInitializer=function(e){i.initializers.push(e)},this.registerBiSink=function(e){i.biSinks.push(e)},this.registerQosSink=function(e){i.qosSinks.push(e)},this.registerPerfSink=function(e){i.perfSinks.push(e)},this.registerScenariosSink=function(e){i.scenariosSinks.push(e)},this.registerExperimentsSink=function(e){i.experimentsSinks.push(e)},this.registerTelemetryConfigurationUpdateSink=function(e){i.configurationUpdateSinks.push(e)},this.updateFlights=function(e){i.configurationUpdateSinks.forEach((function(t){return t.updateFlights(e)}))},this.updateUserPuid=function(e){i.configurationUpdateSinks.forEach((function(t){return t.updateUserPuid(e)}))},this.reportOutgoingApi=function(e){i.reportQosOperation((function(t){return t.reportOutgoingApi(e)}))},this.reportClientError=function(e){i.reportQosOperation((function(t){return t.reportClientError(e)}))},this.reportFatalError=function(e){i.reportQosOperation((function(t){return t.reportFatalError(e)}))},this.reportRawEvent=function(e){i.reportQosOperation((function(t){return t.reportRawEvent(e)}))},this.reportViewPerformanceMetrics=function(e,t){i.reportClientPerformance((function(r){return r.reportViewPerformanceMetrics(e,t)}))},this.$notifyPageLoaded=function(){i.setExperimentData(),i.reportBiOperation((function(e){return e.$notifyPageLoaded()})),i.options.allowAutoPageView&&!i.dom.isPageOptedOutFromAutoPageView()&&i.reportPageView({url:i.dom.getLocationHref(),viewId:i.dom.getPageId()})},this.reportClick=function(e){i.executeAfterPageView((function(){return i.reportBiOperation((function(t){return t.reportClick(e)}))}))},this.reportPartialView=function(e){i.executeAfterPageView((function(){return i.reportBiOperation((function(t){return t.reportPartialView(e)}))}))},this.reportPageView=function(e){if(i.setExperimentData(),e.$hosted)i.executeAfterPageView((function(){return i.reportBiOperation((function(t){return t.reportPageView(e)}))}));else{if(i.reportBiOperation((function(t){return t.reportPageView(e)})),i.executeOnPageViewQueue.length){var t=i.executeOnPageViewQueue;i.executeOnPageViewQueue=[];for(var r=0,n=t;r<n.length;r++)(0,n[r])()}i.pageViewOccurred=!0}},this.reportSpaPageView=function(e){i.setExperimentData(),e.$hosted?i.executeAfterPageView((function(){return i.reportSpaPageViewImpl(e)})):i.reportSpaPageViewImpl(e)},this.getDefaultPlt=function(){return t=(e=i.dom).getNow().getTime(),((r=e.getPerformanceTiming()).domComplete||t)-(r.fetchStart||t)||0;var e,t,r},this.getCurrentLocation=function(){return i.dom.getLocationHref()},this.getCurrentReferrer=function(){return i.dom.getReferrer()},this.getCurrentPageId=function(){return i.dom.getPageId()},this.getTrafficOriginator=function(){return i.dom.getCookie("tref").toLowerCase()},this.beginScenario=function(e,t,n){return i.$beginScenario({area:e,name:t,currentStep:r,attribution:n&&n.attribution,data:n&&n.data}),t},this.beginMultiStepScenario=function(e,t,n,o){return i.$beginScenario({area:e,name:t,currentStep:r,nextStep:n,attribution:o&&o.attribution,data:o&&o.data}),t},this.endScenario=function(e){i.$completeStep({area:e.area,name:e.name,currentStep:r,nextStep:i.getVirtualStepNameForTaskResult(!1,e),successful:e.isSuccess,canceled:!1,error:i.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,data:e.data,timeMsec:i.calculateScenarioTime(e)})},this.cancelScenario=function(e){i.$completeStep({area:e.area,name:e.name,currentStep:r,nextStep:i.getVirtualStepNameForTaskResult(!0,e),successful:e.isSuccess,canceled:!0,error:i.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,data:e.data,timeMsec:i.calculateScenarioTime(e)})},this.endStep=function(e){i.$completeStep({area:e.area,name:e.name,isStep:!0,currentStep:e.step,nextStep:e.next,successful:e.isSuccess,canceled:!1,error:i.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,data:e.data})},this.cancelStep=function(e){i.$completeStep({area:e.area,name:e.name,isStep:!0,currentStep:e.step,nextStep:e.next,successful:e.isSuccess,canceled:!0,error:i.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,data:e.data})},this.endMultiStepScenario=function(e){i.$completeStep({area:e.area,name:e.name,currentStep:e.step,nextStep:i.getVirtualStepNameForTaskResult(!1,e),successful:e.isSuccess,canceled:!1,error:i.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,timeMsec:i.calculateScenarioTime(e),data:e.data})},this.cancelMultiStepScenario=function(e){i.$completeStep({area:e.area,name:e.name,currentStep:e.step,nextStep:i.getVirtualStepNameForTaskResult(!0,e),successful:e.isSuccess,canceled:!0,error:i.getSafeStepErrorCodeValue(e.error),attribution:e.attribution,timeMsec:i.calculateScenarioTime(e),data:e.data})},this.$beginScenario=function(e){i.ccManager.deleteProperty("scenario-id"),i.ccManager.deleteProperty("scenario-step"),i.ccManager.setProperty("scenario-id",i.getCorrelationScenarioId(e)),e.nextStep&&i.ccManager.setProperty("scenario-step",e.nextStep),i.executeAfterPageView((function(){var t=i.createScenarioId(e.area,e.name);i.scenarioStartPoints[t]=i.dom.getNow().getTime(),e.attribution=i.populateScenarioAttribution(e.attribution||{}),e.market=i.options.market,e.language=i.options.language,i.reportScenarioEvent((function(t){return t.$beginScenario(e)}))}))},this.$completeStep=function(e){i.ccManager.deleteProperty("scenario-id"),i.ccManager.deleteProperty("scenario-step"),e.isStep&&(i.ccManager.setProperty("scenario-id",i.getCorrelationScenarioId(e)),e.nextStep&&i.ccManager.setProperty("scenario-step",e.nextStep)),i.executeAfterPageView((function(){e.attribution=i.populateScenarioAttribution(e.attribution||{}),e.market=i.options.market,e.language=i.options.language,i.reportScenarioEvent((function(t){return t.$completeStep(e)}))}))},this.reportExperimentTrigger=function(e){i.reportExperimentOperation((function(t){return t.reportExperimentTrigger(e)}))},this.getCorrelationScenarioId=function(e){return"".concat(e.area,".").concat(e.name)},this.executeAfterPageView=function(e){i.pageViewOccurred||i.options.$ignorePageViewQueue?e():i.executeOnPageViewQueue.push(e)},this.reportBiOperation=function(e){if(!i.initializers.length||i.initializeTelemetry((function(){return i.reportBiOperation(e)})))for(var t=0,r=i.biSinks;t<r.length;t++){var n=r[t];e(n)}},this.reportQosOperation=function(e){if(!i.initializers.length||i.initializeTelemetry((function(){return i.reportQosOperation(e)})))for(var t=0,r=i.qosSinks;t<r.length;t++){var n=r[t];e(n)}},this.reportClientPerformance=function(e){if(!i.initializers.length||i.initializeTelemetry((function(){return i.reportClientPerformance(e)})))for(var t=0,r=i.perfSinks;t<r.length;t++){var n=r[t];e(n)}},this.reportScenarioEvent=function(e){if(!i.initializers.length||i.initializeTelemetry((function(){return i.reportScenarioEvent(e)})))for(var t=0,r=i.scenariosSinks;t<r.length;t++){var n=r[t];e(n)}},this.reportExperimentOperation=function(e){if(!i.initializers.length||i.initializeTelemetry((function(){return i.reportExperimentOperation(e)})))for(var t=0,r=i.experimentsSinks;t<r.length;t++){var n=r[t];e(n)}},this.reportSpaPageViewImpl=function(e){var t,r,n=h(i.dom.getRealLocationHref()),o=i.dom.getSpaLocationHref();i.dom.setSpaPageId(e.viewId),i.dom.setSpaLocationHref("".concat(n.protocol.toLowerCase(),"//").concat(n.host.toLowerCase()).concat((t=e.path,r=t||"/","/"!==r[0]&&(r="/".concat(r)),r)).concat(n.search)),o&&i.dom.setSpaReferrer(o),i.reportPageView({url:i.dom.getLocationHref(),viewId:e.viewId,pltMsec:e.pltMsec,$internalIsSpa:!0})},this.createScenarioId=function(e,t){return"".concat(e,".").concat(t)},this.calculateScenarioTime=function(e){var t=i.createScenarioId(e.area,e.name),r=0;return i.scenarioStartPoints[t]&&(r=i.dom.getNow().getTime()-i.scenarioStartPoints[t],delete i.scenarioStartPoints[t]),r},this.getVirtualStepNameForTaskResult=function(e,t){return e?t.isSuccess?"!CANCELOK":"!CANCELFAIL":t.isSuccess?"!OK":"!FAIL"},this.getSafeStepErrorCodeValue=function(e){var t=e;return(t=(t=t||"").substr(0,i.maxErrorStringLength))&&!/^[0-9a-zA-Z-_. ]+$/.test(t)&&(t="InvalidErrorCodeValue_ReadDocumentation"),t},this.populateScenarioAttribution=function(e){var t=i.getTrafficOriginator(),r=(e.flow||i.dom.getQueryParameter("fref")).toLowerCase();return r||(r=t?"ext":"int"),t||(t="int"),e.origin=t,e.flow=r,e.owner=(e.owner||"").toLowerCase(),e},this.initializeTelemetry=function(e){if(!i.initializers.length)return!0;for(var t=[],r=0,n=i.initializers;r<n.length;r++){var o=n[r];o.initialize(i.initializationAttempt)||t.push(o)}return t.length?(i.initializationAttempt++,i.initializers=t,setTimeout(e,i.initializationAttempt*i.timeoutMultiplier),!1):(i.initializers=[],!0)},this.dom=e.dom||(t=e.urlScrubber,n=t||l,{getLocationHref:function(){return n(window.spaLocationHref||window.location.href)},getRealLocationHref:function(){return n(window.location.href)},getSpaLocationHref:function(){return n(window.spaLocationHref||"")},getReferrer:function(){return n((window.spaReferrer||u).split("?")[0]||"")},getPageId:v,getQueryParameter:f,getCookie:m,getPerformanceTiming:function(){return window.performance&&window.performance.timing||{}},getNow:function(){return new Date},isPageOptedOutFromAutoPageView:g,setSpaLocationHref:function(e){window.spaLocationHref=e},setSpaReferrer:function(e){window.spaReferrer=e},setSpaPageId:function(e){window.spaPageId=e},setWindowLoadHandler:function(e){c()(window).on("load",e)}}),this.cvManager=new T,this.ccManager=new C,this.ajaxTelemetry=new w,this.utilities={}}return e.prototype.setExperimentData=function(){this.reportExperimentOperation((function(e){return e.setExperimentData()}))},e}(),b=new RegExp(/(-?\d+(\.\d+)?),(-?\d+(\.\d+)?)/);function k(e,t){if("scenario-id"===e){var r=t.toLowerCase();switch(r){case"privacy.bulkdelete":case"privacy.deletepsp":return"ust.privacy.delete";case"privacy.createexportarchive":return"ust.privacy.export"}return"ust.amc.".concat(r)}return t}function E(e){return e&&S?e.startsWith("file://")?"Local filepath (REMOVED)":e.startsWith("mailto:")?"mailto:(REMOVED)":e.replace(S,"$1=REMOVED").replace(b,"REMOVED"):""}function P(e){return e.replace(b,"LATLONG_REMOVED")}var A=["BirthDay","BirthMonth","BirthYear","ConnectionToken","Country","FirstName","Gender","LastName","MemberName","Password","Phone","PhoneCountry","PhoneNumber","RetypePassword","assetId","brokenChildId","cid","cip","childCid","childId","childPuid","childsPuid","childsPuidList","e","ECID","email","iAltEmail","id","invitationToken","inviteId","ipt","memberIdList","memberId","mstoken","onBehalfOfPuid","puid","puids","rawPhoneNumber","secondaryCode","slt","t","token","userId","username","state","auth","api_secret"];function R(e){var t=e.responseStatus||0;if(!t)return e.isSuccess=!1,e.httpStatusCode="520",e.errorMessage="Unknown Error",void(e.requestTimeout&&e.latencyMs&&e.latencyMs>=e.requestTimeout&&(e.httpStatusCode="524",e.errorMessage="A Timeout Occurred"));e.isSuccess=t<401||403===t||404===t,401===t&&e.responseDataError&&["interaction_required","invalid_grant","login_required","invalid_or_missing_json_web_token_cookie"].indexOf(e.responseDataError)>-1&&(e.isSuccess=!0)}var O,M,L,V,q,I,D=function(e,t){var r=this;this.portalAreaName=e,this.impl=t,this.reportOutgoingApi=this.impl.reportOutgoingApi,this.reportFatalError=this.impl.reportFatalError,this.reportRawEvent=this.impl.reportRawEvent,this.reportClientError=function(e){var t={name:o,content:{"Ms.Webi.MeePortal.Error":{userAgent:window.navigator.userAgent||"",area:r.portalAreaName},"Ms.Telemetry.Error":{}}};e.data&&(t.content[o].data=JSON.stringify(e.data));var n=t.content["Ms.Telemetry.Error"];n.errorLocation=window.BradburyTelemetry.bi.getCurrentLocation(),e.code&&(n.errorName=e.code),e.category&&(n.errorType=e.category),e.statusCode&&(n.errorCode=e.statusCode),e.message&&(n.errorMessage=e.message),e.method&&(n.errorMethod=e.method),e.severity&&(n.severity=e.severity),r.reportRawEvent(t)}},j=-1,N=function(e){addEventListener("pageshow",(function(t){t.persisted&&(j=t.timeStamp,e(t))}),!0)},F=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},B=function(){var e=F();return e&&e.activationStart||0},Q=function(e,t){var r=F(),n="navigate";return j>=0?n="back-forward-cache":r&&(n=document.prerendering||B()>0?"prerender":r.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},H=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},z=function(e,t){var r=function r(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||(e(n),t&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)},U=function(e,t,r,n){var i,o;return function(a){t.value>=0&&(a||n)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},_=-1,W=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},J=function(){z((function(e){var t=e.timeStamp;_=t}),!0)},G=function(){return _<0&&(_=W(),J(),N((function(){setTimeout((function(){_=W(),J()}),0)}))),{get firstHiddenTime(){return _}}},K=function(e,t){t=t||{};var r,n=[1800,3e3],i=G(),o=Q("FCP"),a=function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(c&&c.disconnect(),e.startTime<i.firstHiddenTime&&(o.value=e.startTime-B(),o.entries.push(e),r(!0)))}))},s=window.performance&&window.performance.getEntriesByName&&window.performance.getEntriesByName("first-contentful-paint")[0],c=s?null:H("paint",a);(s||c)&&(r=U(e,o,n,t.reportAllChanges),s&&a([s]),N((function(i){o=Q("FCP"),r=U(e,o,n,t.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,r(!0)}))}))})))},X=!1,Y=-1,Z={passive:!0,capture:!0},ee=new Date,te=function(e,t){O||(O=t,M=e,L=new Date,ie(removeEventListener),re())},re=function(){if(M>=0&&M<L-ee){var e={entryType:"first-input",name:O.type,target:O.target,cancelable:O.cancelable,startTime:O.timeStamp,processingStart:O.timeStamp+M};V.forEach((function(t){t(e)})),V=[]}},ne=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var r=function(){te(e,t),i()},n=function(){i()},i=function(){removeEventListener("pointerup",r,Z),removeEventListener("pointercancel",n,Z)};addEventListener("pointerup",r,Z),addEventListener("pointercancel",n,Z)}(t,e):te(t,e)}},ie=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,ne,Z)}))},oe=0,ae=1/0,se=0,ce=function(e){e.forEach((function(e){e.interactionId&&(ae=Math.min(ae,e.interactionId),se=Math.max(se,e.interactionId),oe=se?(se-ae)/7+1:0)}))},ue=function(){return q?oe:performance.interactionCount||0},pe=function(){"interactionCount"in performance||q||(q=H("event",ce,{type:"event",buffered:!0,durationThreshold:0}))},de=0,le=function(){return ue()-de},fe=[],me={},ge=function(e){var t=fe[fe.length-1],r=me[e.interactionId];if(r||fe.length<10||e.duration>t.latency){if(r)r.entries.push(e),r.latency=Math.max(r.latency,e.duration);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};me[n.id]=n,fe.push(n)}fe.sort((function(e,t){return t.latency-e.latency})),fe.splice(10).forEach((function(e){delete me[e.id]}))}},he={},ve=function e(t){document.prerendering?addEventListener("prerenderingchange",(function(){return e(t)}),!0):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Se=function(e,t){t=t||{};var r=[800,1800],n=Q("TTFB"),i=U(e,n,r,t.reportAllChanges);ve((function(){var o=F();if(o){if(n.value=Math.max(o.responseStart-B(),0),n.value<0||n.value>performance.now())return;n.entries=[o],i(!0),N((function(){n=Q("TTFB",0),(i=U(e,n,r,t.reportAllChanges))(!0)}))}}))},ye=function(){!function(e,t){t=t||{};var r=[.1,.25];X||(K((function(e){Y=e.value})),X=!0);var n,i=function(e){var t;Y>-1&&we((t=e).name,t.value,t.rating)},o=Q("CLS",0),a=0,s=[],c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=s[0],r=s[s.length-1];a&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(a+=e.value,s.push(e)):(a=e.value,s=[e]),a>o.value&&(o.value=a,o.entries=s,n())}}))},u=H("layout-shift",c);u&&(n=U(i,o,r,t.reportAllChanges),z((function(){c(u.takeRecords()),n(!0)})),N((function(){a=0,Y=-1,o=Q("CLS",0),n=U(i,o,r,t.reportAllChanges)})))}(),K((function(e){we(e.name,e.value,e.rating)})),function(e,t){t=t||{};var r,n=[100,300],i=G(),o=Q("FID"),a=function(e){e.startTime<i.firstHiddenTime&&(o.value=e.processingStart-e.startTime,o.entries.push(e),r(!0))},s=function(e){e.forEach(a)},c=H("first-input",s);r=U(e,o,n,t.reportAllChanges),c&&z((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&N((function(){var i;o=Q("FID"),r=U(e,o,n,t.reportAllChanges),V=[],M=-1,O=null,ie(addEventListener),i=a,V.push(i),re()}))}((function(e){we(e.name,e.value,e.rating)})),function(e,t){t=t||{};var r=[200,500];pe();var n,i=Q("INP"),o=function(e){e.forEach((function(e){e.interactionId&&ge(e),"first-input"===e.entryType&&!fe.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&ge(e)}));var t,r=(t=Math.min(fe.length-1,Math.floor(le()/50)),fe[t]);r&&r.latency!==i.value&&(i.value=r.latency,i.entries=r.entries,n())},a=H("event",o,{durationThreshold:t.durationThreshold||40});n=U(e,i,r,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),z((function(){o(a.takeRecords()),i.value<0&&le()>0&&(i.value=0,i.entries=[]),n(!0)})),N((function(){fe=[],de=ue(),i=Q("INP"),n=U(e,i,r,t.reportAllChanges)})))}((function(e){we(e.name,e.value,e.rating)})),function(e,t){t=t||{};var r,n=[2500,4e3],i=G(),o=Q("LCP"),a=function(e){var t=e[e.length-1];if(t){var n=t.startTime-B();n<i.firstHiddenTime&&(o.value=n,o.entries=[t],r())}},s=H("largest-contentful-paint",a);if(s){r=U(e,o,n,t.reportAllChanges);var c=function(){he[o.id]||(a(s.takeRecords()),s.disconnect(),he[o.id]=!0,r(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),z(c,!0),N((function(i){o=Q("LCP"),r=U(e,o,n,t.reportAllChanges),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-i.timeStamp,he[o.id]=!0,r(!0)}))}))}))}}((function(e){we(e.name,e.value,e.rating)})),Se((function(e){we(e.name,e.value,e.rating)}))},we=function(e,t,r){var n,i,o=(null==t?void 0:t.toFixed(3))||"-1",a=parseFloat(o),s={name:"Ms.Webi.MeePortal.WebVitals",content:{area:Ce(),metric:e,metricValue:a,rating:r,url:null===(n=window.BradburyTelemetry)||void 0===n?void 0:n.bi.getCurrentLocation(),pageName:null===(i=window.BradburyTelemetry)||void 0===i?void 0:i.bi.getCurrentPageId()}};window.BradburyTelemetry.qos.reportRawEvent(s)};function Ce(){return I}window.portalTelemetryGlobals={initializePortalTelemetry:function(e){var t;t=A.concat(e.queryStringParametersBlockList||[]).join("|"),S=new RegExp("\\b(".concat(t,")=([^\\&$]+)"),"ig"),e.providerOptions.urlScrubber=E;var r,n,i=new x(e.providerOptions),o=new a({normalizePropertyValue:k});if(e.providerOptions.language&&o.setProperty("market",e.providerOptions.language),i.setCorrelationContextManager(o),i.setUtilityFunctions({overrideRequestQosData:R,globalUrlScrubber:E,resourceNameScrubber:P}),e.oneDSOptions){e.oneDSOptions.useJsll3xQuirks=!0;var s=window.OneDS;s.initialize(e.oneDSOptions,e.providerOptions),i.setCorrelationVectorManager(s.CorrelationVectorManager),i.registerBiSink(s.BiSink),i.registerQosSink(new D(e.portalAreaName,s.ClientQosSink)),i.registerScenariosSink(s.ScenarioSink),i.registerPerfSink(s.PerformanceSink),i.registerExperimentsSink(s.ExperimentsSink),i.registerTelemetryConfigurationUpdateSink(s.TelemetryConfigurationUpdateSink),e.oneDSOptions.overrideRequestQosData=R;var u=new y(e.oneDSOptions,s.CorrelationVectorManager,o,s.ClientQosSink);i.setAjaxTelemetrySink(u),e.logWebVitals&&ye()}I=e.portalAreaName,i.useAsGlobalTelemetryProvider(),window.__bradbury=i,function(e){window.portalBi=e.bi,window.portalExperiments=e.experiments,window.portalQos=e.qos,window.portalClientPerf=e.perf,window.portalScenarios=e.scenarios,window.portalCv=e.cv,window.portalCc=e.cc,c().portalAjaxGet=e.ajax.ajaxGet,c().portalAjaxPost=e.ajax.ajaxPost,c().portalAjaxPut=e.ajax.ajaxPut,c().portalAjaxDelete=e.ajax.ajaxDelete,c().getAntiForgeryToken=e.ajax.getAntiForgeryToken,c().mockAjaxOperationResult=e.ajax.mockAjaxOperationResult,c().clearAjaxOperationMocks=e.ajax.clearAjaxOperationMocks}(window.BradburyTelemetry),window.addEventListener("error",(r=function(e){var t,r,n,i,o;r=e.filename,n=e.message,i=e.lineno,o=(null===(t=e.error)||void 0===t?void 0:t.stack)||"",window.BradburyTelemetry.qos.reportFatalError({location:window.BradburyTelemetry.bi.getCurrentLocation(),pageId:window.BradburyTelemetry.bi.getCurrentPageId(),script:r,message:n,lineNumber:i,userAgent:window.navigator.userAgent||"",ext:{Area:Ce(),Stack:o}})},n=null,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n||r.apply(void 0,e),clearTimeout(n),n=setTimeout((function(){return n=null}),500)}))},reportScriptLoaded:function(e,t){setTimeout((function(){window.BradburyTelemetry.qos.reportRawEvent({name:"Ms.Webi.MeePortal.LoadScript",content:{"Ms.Webi.MeePortal.LoadScript":{scriptName:e,success:t}}})}),0)},getPortalAreaName:Ce,globalUrlScrubber:E,resourceNameScrubber:P}})(),i})()));
